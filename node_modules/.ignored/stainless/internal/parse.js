"use strict";
// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.
Object.defineProperty(exports, "__esModule", { value: true });
exports.defaultParseResponse = void 0;
const log_1 = require("./utils/log.js");
async function defaultParseResponse(client, props) {
    const { response } = props;
    // fetch refuses to read the body when the status code is 204.
    if (response.status === 204) {
        return null;
    }
    if (props.options.__binaryResponse) {
        return response;
    }
    const contentType = response.headers.get('content-type');
    const isJSON = contentType?.includes('application/json') || contentType?.includes('application/vnd.api+json');
    if (isJSON) {
        const json = await response.json();
        (0, log_1.logger)(client).debug('response', response.status, response.url, response.headers, json);
        return json;
    }
    const text = await response.text();
    (0, log_1.logger)(client).debug('response', response.status, response.url, response.headers, text);
    // TODO handle blob, arraybuffer, other content types, etc.
    return text;
}
exports.defaultParseResponse = defaultParseResponse;
//# sourceMappingURL=parse.js.map